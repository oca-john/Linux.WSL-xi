# Vim编辑器-ZHXI
此 Markdown 笔记，从个人纸质笔记中再整理而来。

By Oca_John <oca-john@hotmail.com>

源自 coolshell 博客 2011 年文章。


## 1. Vim 最日常的操作
### 1.1 Vim 安装
- sudo zypper in vim

### 1.2 插入模式
- `i` 光标前插入，`a` 光标后插入，`esc` 返回编辑模式
- `x` 删除光标处的单个字符，`dd` 剪切当前行，`p` 粘贴到下一行
- `:w filename.sh` 存为 filename.sh 文件，`:wq` 保存并退出，`:q!` 强制退出

### 1.3 移动光标
- `h, j, k, l` 分别对应 `左、下、上、右`


## 2. 简单编辑与文件操作
模式，移动，复制粘贴，撤销重做，文件操作
### 2.1 几种插入模式
- `i`, insert 模式，定位到光标之前插入字符；
- `a`, ahead 模式，定位到光标之后插入字符(但以打字方向来看是向 ahead 的)；
- `o`, other_line 模式，定位到新的下一行，并继续插入字符；

### 2.2 快速移动
- `h, j, k, l` 等可以加入数字，如 `6l` 向右移动 6 字符，`4h` 向左移动 4 字符；
- `3j` 向下移动 3 行，`8k `向上移动 8 行；

### 2.3 复制粘贴
- `dd`  剪切当前行，删除当前行并存入缓存区
- `2dd` 剪切此后 12 行
- `yy`  复制当前行
- `3yy` 复制此后 3 行
- `p`   粘贴

### 2.4 撤销重做
- `u` 撤销 undo
- `ctrl-r` 重做 redo

### 2.5 文件操作
- `:e filename` 打开文件，`:w` 保存，`:saveas filename` 另存为
- `:wq` 保存并退出 = `:x` 仅需要时保存 = `ZZ` 不用输 : 和回车
- `:bn` 切到下一个 next 打开的文件，`:bp` 切到上一个 preview 打开的文件


## 3. 查找-替换
### 3.1 查找操作
- `/ pattern` 向前查找 pattern
- `? pattern` 向后查找 pattern (? 是 / 的上档符号，意指向上文查找)
- `n` 光标移至下一处
- `N` 光标移至上一处 (N 是 n 的上档符号，意指向上文移动光标)

### 3.2 替换操作
- `:s/a/b/` 将 a 换为 b (光标后首个)
- `:s/a/b/g` 将 a 换为 b (本行全部)
- `:1,n s/a/b/` 1 到 n 行，将 a 换为 b (每行首个)
- `:n,$ s/a/b/g` n 到 $ 末行，将 a 换为 b (每行全部)
- `:1,$` 表示全文
- `:% s/a/b/g`=`1,$ s/a/b/g`=`:g/a/s//b/g` 全文，将 a 换为 b (每行全部)
- 前后有 `g` 表示全文，`/a/` 和 `/b/` 表示pattern，`s/` 表示替换


## 4. 重复动作-跳转动作-快速编辑
### 4.1 重复
- `.` 重复上一个命令，`n <command>` 重复command命令 n 次
- `4dd` 删除 4 行，`6p` 粘贴 6 次，`4.` 重复上一个命令 4 次

### 4.2 跳转
- `:n` 跳转到n行，`gg` 跳转到首行，`G` 跳转到末行
- `w` 下个单词开头，`e` 下个单词结尾，`W` 上个字串开头，`E` 上个字串结尾
- `*` 匹配下个光标所在单词，`#` 匹配上个光标所在单词
- `%` 匹配括号移动 (成对的“\(,\[,\{”)，需要光标定位到括号上

### 4.3 快速编辑
- `0y$` 0 定位到行首，y 开始复制，$ 到行尾截止 --> yy 复制本行的所有字符
- <定位起点> <操作符，命令> <定位终点>
- `ye` y 开始复制，e 单词结尾 --> 复制单词在光标后的部分
- `y2/foo`


## 5. 行定位
- `12j` 向下移动指定行；
- `gg` 转到文件开始；
- `:134` 定位到 134 行；
- `G` 转到文件结尾；


## 6. 区域选择


## 7. 块操作
- `ctrl + v`, 选择字符块....

## 8. 自动提示-补全
- 在插入模式下，输入部分（开头）词语，可用 `ctrl-n` 或 `ctrl-p` 自动补全


## 9. 宏录制


## 10. 可视化选择


## 11. 分屏
- `:split` 横向分屏 (默认各个屏幕同步内容)，`:vsplit` 竖向分屏
- `<ctrl-w> + 方向键` 切换分屏
- `<ctrl-w> + 加/减号` 增加或减小字体 (缩放窗口)

